<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_StageHandler</spriteName>
  <solid>0</solid>
  <visible>0</visible>
  <depth>-16</depth>
  <persistent>0</persistent>
  <parentName>obj_ParStagehandler</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Values reset

global.LifeCrystals = 10 
global.LifeManaCollected = 0
global.MaxLifeMana = 100

global.SpellCrystals = 10
global.SpellManaCollected = 0
global.MaxSpellMana = 300


//-=[Visible variables]=
//Boss variables
global.BossName = "" //Boss's name
global.Spellcards = 0 //How many Spellcards the boss starts with
global.RemainingSpellcards = 0 //this is used so i can record how many spellcards the boss has remaining
global.BossActive = 0

//Spellcard Infomation
//Spellcard Capture/ Bonus
global.SpellCaptured = true //Is the spellcard Captured?
global.Spellcardname = "Pureity of Light: Nothing to see here!" //spellcard name
global.SpellBonus = 1234567890 //the Spellcard Bonus Avalible
global.SpellcardTimeSec = 0 //how many seconds the spellcard starts with
global.SpellTimeStart = global.SpellcardTimeSec
global.SpellcardTimeMiliSec = 0 
global.SpellcardType = "NonSpell" //Types: NonSpell, Spellcard, TimeOut
global.LastWord = false
global.SpellcardElement = "Void" //[This may or maynot be used] This variable will show what Element the current spellcard is

global.SpellcardMaxHealth = 1
global.SpellcardHealth = global.SpellcardMaxHealth
global.SpellcardCleared = false //Clear any bullets onj the screen

//-=[Hidden Spellcard Variables]=-
global.SpellTimerActive = false //if Set to false the Spellcard timer will not count down (Useful for infinite timers)
global.SpellcardBulletRes = 1 //this shows the damamge the player will do to the boss at 1 equals Normal Damage
global.SpellcardBombRes = 1 //similar to Bullet Resistence but for Bomb related damages

global.SpellHUDdisplay = false //this controls weither or not the Boss HUD is displayed
global.SecondarynonSpell = false

Killtimer = 0

//-[movement]=-
global.CordTimer = 0
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Stage Variables
global.CurrentStage = "St1"

//Music
random_set_seed(random(1000000))

obj_MusicHandler.TrackNo = 1
obj_MusicHandler.MusicReset = true
obj_BackgroundHandler.StageBackground = scr_Stage1Background
obj_MusicHandler.MusicPaused = true

Haze = instance_create(x, y, obj_StageBackHaze)
Haze.Startinghaze = true

//Unlocks Diary Entry
if ds_grid_get(global.OstUnlocked, 2, 1) = false
{
    instance_create(x, y, obj_NewDiaryEntry)
    ds_grid_set(global.OstUnlocked, 2, 1, true)
        
    //Save Diary Entry
    ini_open("Settings.ini")

    ini_write_string("Diary", "MusicRecords", ds_grid_write(global.OstUnlocked))
        
    ini_close()
}

//Variables
event_inherited()

Seconds = 62

EventPlacement = 0
typechange = 1
type = 0

Posdynamic = 0

//background
EventScroll = 5
PortalEvent = 1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>with(obj_Stage1Fireflies1){instance_destroy()}
with(obj_Stage1Fireflies2){instance_destroy()}

obj_BackgroundHandler.Endinghaze = false
instance_create(x, y, obj_Stage2Handler)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Stage Timer
event_inherited()
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Stage Events
/*if Seconds = 10 and Milliseconds = 0
{

    Event = instance_create(185,200,obj_S1Enemy2)
    Event.xcord = 1024 - 300
    Event.ycord = 250
    Event.Speed = 5
    Event.ExitX = 160
    Event.ExitY = 400
    
    Event = instance_create(185,200,obj_WispSpawner)
    Event.Red = 250
    Event.Green = 250
    Event.Blue = 100
    Event.direction = random_range(80,110)
    Event.Enemyinstance = obj_Stage1StrongFirefly1
}*/

if Seconds = 2 and Milliseconds = 0
{
    Event = instance_create(250,300,obj_Stage1Firefly1Spawner)
    Event.Red = 250
    Event.Green = 250
    Event.Blue = 100
    Event.Enemyinstance = obj_Stage1Firefly1
    Event.direction = 10
    Event.EnemyDirection = 30
    Event.speed = 5
}

if Seconds = 3 and Milliseconds = 0
{
    Event = instance_create(1024-250,250,obj_Stage1Firefly1Spawner)
    Event.Red = 250
    Event.Green = 250
    Event.Blue = 100
    Event.Enemyinstance = obj_Stage1Firefly1
    Event.direction = 170
    Event.EnemyDirection = 150
    Event.speed = 5
}

if Seconds = 4 and Milliseconds = 0
{
    Event = instance_create(1024-250,300,obj_Stage1Firefly1Spawner)
    Event.Red = 150
    Event.Green = 250
    Event.Blue = 100
    Event.Enemyinstance = obj_Stage1Firefly2
    Event.direction = 160
    Event.EnemyDirection = 100
    Event.speed = 8
    Event.SR = 15
    
    Event = instance_create(250,300,obj_Stage1Firefly1Spawner)
    Event.Red = 200
    Event.Green = 250
    Event.Blue = 100
    Event.Enemyinstance = obj_Stage1Firefly2
    Event.direction = 20
    Event.EnemyDirection = 80
    Event.speed = 8
    Event.SR = 15
}

//Stage Banner=============
if Seconds = 7 and Milliseconds = 0
{
    Banner = instance_create(1024/2, 250, obj_StageBanners)
    Banner.Index = 0
    Banner.StageNo = "Stage 1"
    Banner.StageLocation = "Firefly Road"
}
//========================= 

if Seconds = 11 and Milliseconds = 0
{
    Event = instance_create(380,150,obj_WispSpawnerSlow)
    Event.Red = 250
    Event.Green = 250
    Event.Blue = 100
    Event.direction = random_range(80,110)
    Event.Enemyinstance = obj_Stage1StrongFirefly1
}

if Seconds = 14 and Milliseconds = 0
{
    Event = instance_create(1024-380,150,obj_WispSpawnerSlow)
    Event.Red = 250
    Event.Green = 250
    Event.Blue = 100
    Event.direction = random_range(80,110)
    Event.Enemyinstance = obj_Stage1StrongFirefly1
}

if Seconds = 16 and Milliseconds = 0
{
    Event = instance_create(512+100,300,obj_Stage1Firefly2Spawner)
    Event.Red = 200
    Event.Green = 250
    Event.Blue = 100
    Event.Enemyinstance = obj_Stage1Firefly3
    Event.direction = 180-10
    Event.EnemyDirection = random_range(-5,5)
    Event.speed = 5
    Event.SR = 15
    Event.MaxSpawnNumb = 3
}

if Seconds = 18 and Milliseconds = 0
{
    Event = instance_create(512-120,300-50,obj_Stage1Firefly2Spawner)
    Event.Red = 200
    Event.Green = 250
    Event.Blue = 100
    Event.Enemyinstance = obj_Stage1Firefly3
    Event.direction = 10
    Event.EnemyDirection = random_range(180,180-5)
    Event.speed = 5
    Event.SR = 15
    Event.MaxSpawnNumb = 3
}

if Seconds = 20 and Milliseconds = 0
{
    Event = instance_create(512+140,300-100,obj_Stage1Firefly2Spawner)
    Event.Red = 200
    Event.Green = 250
    Event.Blue = 100
    Event.Enemyinstance = obj_Stage1Firefly3
    Event.direction = 180-10
    Event.EnemyDirection = random_range(-5,5)
    Event.speed = 5
    Event.SR = 15
    Event.MaxSpawnNumb = 3
}

if Seconds = 22 and Milliseconds = 0
{
    Event = instance_create(512-160,300-150,obj_Stage1Firefly2Spawner)
    Event.Red = 200
    Event.Green = 250
    Event.Blue = 100
    Event.Enemyinstance = obj_Stage1Firefly3
    Event.direction = 10
    Event.EnemyDirection = random_range(180,180-5)
    Event.speed = 5
    Event.SR = 15
    Event.MaxSpawnNumb = 3
    
}

if Seconds = 23 and Milliseconds = 0
{
    Event = instance_create(512,100,obj_WispSpawnerSlow)
    Event.Red = 250
    Event.Green = 250
    Event.Blue = 100
    Event.direction = random_range(80,110)
    Event.Enemyinstance = obj_Stage1StrongFirefly1
}

if Seconds = 24 and Milliseconds = 0
{
    Event = instance_create(512+100,300,obj_Stage1Firefly2Spawner)
    Event.Red = 200
    Event.Green = 250
    Event.Blue = 100
    Event.Enemyinstance = obj_Stage1Firefly3
    Event.direction = 180-10
    Event.EnemyDirection = random_range(-5,5)
    Event.speed = 5
    Event.SR = 15
    Event.MaxSpawnNumb = 3
}

if Seconds = 26 and Milliseconds = 0
{
    Event = instance_create(512-120,300-50,obj_Stage1Firefly2Spawner)
    Event.Red = 200
    Event.Green = 250
    Event.Blue = 100
    Event.Enemyinstance = obj_Stage1Firefly3
    Event.direction = 10
    Event.EnemyDirection = random_range(180,180-5)
    Event.speed = 5
    Event.SR = 15
    Event.MaxSpawnNumb = 3
}

if Seconds = 28 and Milliseconds = 0
{
    Event = instance_create(512+140,300-100,obj_Stage1Firefly2Spawner)
    Event.Red = 200
    Event.Green = 250
    Event.Blue = 100
    Event.Enemyinstance = obj_Stage1Firefly3
    Event.direction = 180-10
    Event.EnemyDirection = random_range(-5,5)
    Event.speed = 5
    Event.SR = 15
    Event.MaxSpawnNumb = 3
}

if Seconds = 30 and Milliseconds = 0
{
    Event = instance_create(512-160,300-150,obj_Stage1Firefly2Spawner)
    Event.Red = 200
    Event.Green = 250
    Event.Blue = 100
    Event.Enemyinstance = obj_Stage1Firefly3
    Event.direction = 10
    Event.EnemyDirection = random_range(180,180-5)
    Event.speed = 5
    Event.SR = 15
    Event.MaxSpawnNumb = 3
    
}

if Seconds = 29 and Milliseconds = 0
{
    
    Event = instance_create(512+100,150,obj_WispSpawner)
    Event.Red = 250
    Event.Green = 50
    Event.Blue = 250
    Event.direction = random_range(80,110)
    Event.Enemyinstance = obj_Stage1Firefly4
}

if Seconds = 29 and Milliseconds = 30
{
    
    Event = instance_create(512-100,150,obj_WispSpawner)
    Event.Red = 250
    Event.Green = 50
    Event.Blue = 250
    Event.direction = random_range(80,110)
    Event.Enemyinstance = obj_Stage1Firefly4
}

if Seconds = 30 and Milliseconds = 0
{
    
    Event = instance_create(512,150,obj_WispSpawner)
    Event.Red = 250
    Event.Green = 50
    Event.Blue = 250
    Event.direction = random_range(80,110)
    Event.Enemyinstance = obj_Stage1Firefly4
}

if Seconds = 33 and Milliseconds = 0
{
    Event = instance_create(512,0,obj_Lucust1stage1)
    Event.EnemyHP = 2000000000000000000000
}

//Midboss =========================== 40 sec
if Seconds = 40 and Milliseconds = 0 
{
    Milliseconds += 1
    
    Event = instance_create(1024/2, 0, obj_LilliWave)
    Event = instance_create(512 - 100, -20, obj_LilliMidboss)
}
//=================================

if Seconds = 41 and Milliseconds = 0
{
    Event = instance_create(512, 200, obj_LargeLocustSpawner)
    Event.Enemy = obj_Lucust2stage1
}

if Seconds = 43 and Milliseconds = 0
{
    Event = instance_create(1024-250,300,obj_Stage1Firefly1Spawner)
    Event.Red = 250
    Event.Green = 50
    Event.Blue = 250
    Event.Enemyinstance = obj_Stage1Firefly1
    Event.direction = 170
    Event.EnemyDirection = 150
    Event.speed = 5
}

if Seconds = 46 and Milliseconds = 0
{
    Event = instance_create(512,200,obj_WispSpawnerSlow)
    Event.Red = 250
    Event.Green = 250
    Event.Blue = 100
    Event.direction = random_range(80,110)
    Event.Enemyinstance = obj_Stage1StrongFirefly1
}

if Seconds = 48 and Milliseconds = 0
{
    Event = instance_create(250,300,obj_Stage1Firefly1Spawner)
    Event.Red = 250
    Event.Green = 50
    Event.Blue = 250
    Event.Enemyinstance = obj_Stage1Firefly1
    Event.direction = 10
    Event.EnemyDirection = 30
    Event.speed = 5
}
if Seconds = 50 and Milliseconds = 0
{
    Event = instance_create(1024-250,300,obj_Stage1Firefly1Spawner)
    Event.Red = 250
    Event.Green = 50
    Event.Blue = 250
    Event.Enemyinstance = obj_Stage1Firefly1
    Event.direction = 170
    Event.EnemyDirection = 150
    Event.speed = 5
}

if Seconds = 53 and Milliseconds = 0
{
    Event = instance_create(512-100,200,obj_WispSpawnerSlow)
    Event.Red = 250
    Event.Green = 250
    Event.Blue = 100
    Event.direction = random_range(80,110)
    Event.Enemyinstance = obj_Stage1StrongFirefly1
    
    Event = instance_create(512+100,200,obj_WispSpawnerSlow)
    Event.Red = 250
    Event.Green = 250
    Event.Blue = 100
    Event.direction = random_range(80,110)
    Event.Enemyinstance = obj_Stage1StrongFirefly1
}

if Seconds = 55 and Milliseconds = 0
{
    Event = instance_create(512, 200, obj_LargeLocustSpawner)
    Event.Enemy = obj_Lucust2stage1
}

if Seconds = 64 and Milliseconds = 0
{
    Milliseconds += 1
    if instance_exists(obj_ParDanmaku)
    {
        with (obj_ParDanmaku)
        {
            Deadly = false
            instance_destroy()
        }
    }
    //Main Boss 
    if global.Player = "Midnight"
    {
        Event = instance_create(x, y, obj_AlexandraPreFight)
    }
    
    if global.Player = "Alex"
    {
        Event = instance_create(x, y, obj_MiddyPreFight)
    }
}

if Seconds = 66 and Milliseconds = 0
{
    Endcard = instance_create(512, 200, obj_EndOfStage)
    Endcard.ScoreBonus = 1000000
    
    Haze = instance_create(x, y, obj_StageBackHaze)
    Haze.Endinghaze = true
}

if Seconds = 70 and Milliseconds = 0
{
    with(Haze){instance_destroy()}
    instance_destroy()
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Stage Background Events
obj_BackgroundHandler.ScrollSpeed = EventScroll
obj_BackgroundHandler.S1PGlowInc = PortalEvent

if Seconds &gt; 0 and Seconds &lt; 3 
{
    EventScroll -= 7/180
}

if Seconds &gt;= 5 
{
    if EventScroll &lt; 2
    {
        EventScroll += 2/1100
    }
}

if Seconds &gt;= 41
{
    if PortalEvent &gt; 0
    {
        PortalEvent -= 1/1100
        obj_BackgroundHandler.PinkFireflies = true
    }
}

if Seconds &gt;= 64
{
    if EventScroll &gt; 1
    {
        EventScroll -= 1/120
    }
}

if Seconds = 68
{
    obj_BackgroundHandler.Endinghaze = true
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if instance_exists(obj_Debug)
{
    draw_text_outline(10, 10, "Stage Seconds: " + string(Seconds), c_white, c_black, 1, ft_Dialog, 1)
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
